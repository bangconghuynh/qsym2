---
title: Symmetry group detection
description: Configurable parameters for symmetry group detection
---

# Symmetry group detection

=== "Binary"
    === "Parameter specification"
        ```yaml
        symmetry_group_detection: !Parameters #(1)!
          moi_thresholds: #(2)!
          - 1e-2
          - 1e-4
          - 1e-6
          distance_thresholds: #(3)!
          - 1e-2
          - 1e-4
          - 1e-6
          time_reversal: false #(4)!
          fictitious_magnetic_fields: #(5)!
          - [[0, 0, 0], [0, 0, 1]]
          fictitious_electric_fields: null #(6)!
          field_origin_com: true #(7)!
          write_symmetry_elements: false #(8)!
          result_save_name: null #(9)!
        ```

        1. :fontawesome-solid-laptop-code: Under the hood, the `!Parameters` syntax indicates that the variant `Parameters` of the [`SymmetryGroupDetectionInputKind`](https://api.qsym2.dev/qsym2/interfaces/input/enum.SymmetryGroupDetectionInputKind.html#variant.Parameters) enum is being specified, which wraps around the [`SymmetryGroupDetectionParams`](https://api.qsym2.dev/qsym2/drivers/symmetry_group_detection/struct.SymmetryGroupDetectionParams.html) struct.
        2. :fontawesome-solid-users: Each element in this list is a threshold for moment-of-inertia comparisons. All pairs of thresholds, one from `moi_thresholds` and one from `distance_thresholds`, will be considered.
        3. :fontawesome-solid-users: Each element in this list is a threshold for distance and geometry comparisons. All pairs of thresholds, one from `moi_thresholds` and one from `distance_thresholds`, will be considered.
        4. :fontawesome-solid-users: This boolean indicates if time reversal is to be taken into account.
        5. :fontawesome-solid-users: Each element in this optional list is a tuple consisting of an origin $\mathbf{O}$ and a vector $\mathbf{v}$, for which a `magnetic(+)` special atom will be added at $\mathbf{O} + \mathbf{v}$, and a `magnetic(-)` special atom will be added at $\mathbf{O} - \mathbf{v}$.
        6. :fontawesome-solid-users: Each element in this optional list is a tuple consisting of an origin $\mathbf{O}$ and a vector $\mathbf{v}$, for which an `electric(+)` special atom will be added at $\mathbf{O} + \mathbf{v}$.
        7. :fontawesome-solid-users: This boolean indicates if the origins specified in `fictitious_magnetic_fields` and `fictitious_electric_fields` are to be taken relative to the molecule's centre of mass rather than to the space-fixed origin.
        8. :fontawesome-solid-users: This boolean indicates if a summary of the located symmetry elements is to be written to the output file.
        9. :fontawesome-solid-users: This optional string specifies a name for saving the result as a binary file of extension `.qsym2.sym`. If none is given, the result will not be saved.

    === "Read from file"
        ```yaml
        symmetry_group_detection: !FromFile #(1)!
          /path/to/symmetry/result/file #(2)!
        ```

        1. :fontawesome-solid-laptop-code: Under the hood, the `!FromFile` syntax indicates that the variant `FromFile` of the [`SymmetryGroupDetectionInputKind`](https://api.qsym2.dev/qsym2/interfaces/input/enum.SymmetryGroupDetectionInputKind.html#variant.Parameters) enum is being specified.
        2. :fontawesome-solid-users: This path points to a `.qsym2.sym` file generated by QSym² from an earlier symmetry group detection calculation. However, this path should be specified without the `.qsym2.sym` extension.</br>For example, if QSym² has generated the file `~/calc/water/h2o.qsym2.sym`, then this path should be `~/calc/water/h2o`.

=== "Python"
    ```py
    from qsym2 import detect_symmetry_group, PyMolecule

    pymol = PyMolecule(
        atoms=[
            ("O", [0.0000000, -0.0184041,  0.0000000]),
            ("H", [0.0000000,  0.5383520, -0.7830361]),
            ("H", [0.0000000,  0.5383520,  0.7830361]),
        ],
        threshold=1e-7,
    )

    unisym, magsym = detect_symmetry_group(
        inp_xyz=None,
        inp_mol=pymol,
        out_sym="mol",
        moi_thresholds=[1e-2, 1e-4, 1e-6],
        distance_thresholds=[1e-2, 1e-4, 1e-6],
        time_reversal=False,
        write_symmetry_elements=True,
        fictitious_magnetic_field=None,
        fictitious_electric_field=None
    )
    ```
